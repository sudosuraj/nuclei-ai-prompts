<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nuclei AI Prompts</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --hacker-green: #00ff00;
            --terminal-black: #0a0a0a;
            --glow-effect: 0 0 10px var(--hacker-green);
        }

        /* Previous CSS styles remain the same */
        /* ... (keep all previous style rules) ... */
    </style>
</head>
<body>
    <div class="matrix-bg"></div>
    <div class="scan-line"></div>

    <div class="container py-5">
        <div class="terminal-header text-center">
            <h1>// AI RECON PROMPTS <span class="blink">_</span></h1>
            <p>Community-Driven Nuclei AI Templates Repository by @sudosuraj</p>
        </div>

        <div class="row" id="categories"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/clipboard.min.js"></script>
    <script>
        const README_URL = 'https://raw.githubusercontent.com/sudosuraj/nuclei-ai-prompts/main/README.md';

        async function fetchAndParseREADME() {
            try {
                const response = await fetch(README_URL);
                const markdown = await response.text();
                return parseMarkdown(markdown);
            } catch (error) {
                console.error('Error fetching README:', error);
                return [];
            }
        }

        function parseMarkdown(markdown) {
            const categories = [];
            let currentCategory = null;
            let inCodeBlock = false;
            let currentPrompts = [];

            markdown.split('\n').forEach(line => {
                // Detect category headings (## Level 2 headers)
                if (line.startsWith('## ')) {
                    if (currentCategory) {
                        categories.push({
                            name: currentCategory,
                            prompts: currentPrompts
                        });
                    }
                    currentCategory = line.replace('## ', '').trim();
                    currentPrompts = [];
                    inCodeBlock = false;
                }
                // Detect code blocks
                else if (line.startsWith('```')) {
                    inCodeBlock = !inCodeBlock;
                }
                // Collect prompts from code blocks
                else if (inCodeBlock && line.trim()) {
                    currentPrompts.push(line.trim());
                }
            });

            // Push the last category
            if (currentCategory && currentPrompts.length > 0) {
                categories.push({
                    name: currentCategory,
                    prompts: currentPrompts
                });
            }

            return categories;
        }

        function createCategoryCard(category) {
            const card = document.createElement('div');
            card.className = 'col-md-6';
            
            const iconMap = {
                'subdomain': 'fa-globe',
                'vulnerability': 'fa-bug',
                'scanning': 'fa-search',
                'detection': 'fa-eye',
                'network': 'fa-network-wired'
            };

            const icon = Object.entries(iconMap).find(([key]) => 
                category.name.toLowerCase().includes(key)
            )?.[1] || 'fa-terminal';

            card.innerHTML = `
                <div class="category-card">
                    <div class="card-header">
                        <i class="fas ${icon}"></i>
                        ${category.name}
                    </div>
                    <div class="card-body">
                        ${category.prompts.map(prompt => `
                            <div class="prompt-item">
                                <code>${prompt}</code>
                                <button class="copy-btn" data-clipboard-text="${prompt}">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            return card;
        }

        async function renderCategories() {
            const categories = await fetchAndParseREADME();
            const container = document.getElementById('categories');
            
            categories.forEach(category => {
                container.appendChild(createCategoryCard(category));
            });

            // Initialize Clipboard.js after elements are created
            new ClipboardJS('.copy-btn');
            
            // Add copy confirmation
            document.addEventListener('copy', (e) => {
                const toast = document.createElement('div');
                toast.textContent = 'Payload copied to clipboard!';
                toast.style.position = 'fixed';
                toast.style.bottom = '20px';
                toast.style.right = '20px';
                toast.style.background = 'var(--terminal-black)';
                toast.style.color = 'var(--hacker-green)';
                toast.style.padding = '1rem';
                toast.style.border = '1px solid var(--hacker-green)';
                document.body.appendChild(toast);
                
                setTimeout(() => toast.remove(), 2000);
            });
        }

        renderCategories();
    </script>
</body>
</html>
